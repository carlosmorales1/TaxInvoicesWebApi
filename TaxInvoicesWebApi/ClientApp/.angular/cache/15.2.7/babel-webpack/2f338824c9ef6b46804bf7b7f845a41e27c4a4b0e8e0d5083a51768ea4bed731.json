{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { integerValidator } from '../utils';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SearchInvoiceComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"input\", 15);\n    i0.ɵɵlistener(\"change\", function SearchInvoiceComponent_div_4_Template_input_change_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const option_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onRadioChange(option_r3.value));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 16);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", option_r3.value)(\"value\", option_r3.value)(\"checked\", option_r3.value === ctx_r0.selectedOption);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", option_r3.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r3.label);\n  }\n}\nfunction SearchInvoiceComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const customertOption_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", customertOption_r6.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(customertOption_r6.businessName);\n  }\n}\nfunction SearchInvoiceComponent_tr_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r7 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", product_r7.numberInvoice, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", product_r7.dateInvoice, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.formatPrice(product_r7.totalInvoice), \" \");\n  }\n}\nexport class SearchInvoiceComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.radioOptions = [{\n      value: 'customer',\n      label: 'Cliente'\n    }, {\n      value: 'numberInvoice',\n      label: 'Número de Factura'\n    }];\n    this.selectedOption = 'customer';\n    this.customers = [];\n    this.products = [];\n    this.myForm = new FormGroup({\n      invoiceNumber: new FormControl(\"\", [Validators.required, Validators.min(1), integerValidator()]),\n      customerId: new FormControl(\"\", [Validators.required])\n    });\n  }\n  ngOnInit() {\n    this.getCustomer();\n  }\n  onRadioChange(option) {\n    this.selectedOption = option;\n  }\n  getCustomer() {\n    this.apiService.get('customer').subscribe(data => {\n      this.customers = data.map(customer => {\n        return {\n          id: customer.id,\n          businessName: customer.razonSocial\n        };\n      });\n    });\n  }\n  search() {\n    const formData = this.myForm.value;\n    var url = 'bills';\n    if (this.selectedOption == 'customer') {\n      if (formData.customerId == \"\") {\n        Swal.fire('Selecciona un cliente', '', 'info');\n        return;\n      }\n      url += \"?idCliente=\" + formData.customerId;\n    } else {\n      if (formData.invoiceNumber == \"\") {\n        Swal.fire('Digita un número de factura', '', 'info');\n        return;\n      }\n      url += \"?idCliente=\" + formData.customerId;\n    }\n    this.apiService.get(url).subscribe(data => {\n      this.products = data.map(product => {\n        return {\n          numberInvoice: product.numeroFactura,\n          dateInvoice: product.fechaEmisionFactura,\n          totalInvoice: product.totalFactura\n        };\n      });\n    });\n  }\n  formatPrice(price) {\n    return price.toLocaleString('es-CO', {\n      style: 'decimal',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  }\n}\nSearchInvoiceComponent.ɵfac = function SearchInvoiceComponent_Factory(t) {\n  return new (t || SearchInvoiceComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nSearchInvoiceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SearchInvoiceComponent,\n  selectors: [[\"app-search-invoice-component\"]],\n  decls: 31,\n  vars: 6,\n  consts: [[1, \"container\"], [1, \"search-section\"], [\"for\", \"search-type\"], [\"class\", \"radio\", 4, \"ngFor\", \"ngForOf\"], [1, \"customer-info\"], [3, \"formGroup\"], [1, \"field\"], [\"formControlName\", \"customerId\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"invoiceNumber\", \"type\", \"text\"], [3, \"click\"], [1, \"products\"], [4, \"ngFor\", \"ngForOf\"], [1, \"radio\"], [\"type\", \"radio\", 3, \"id\", \"value\", \"checked\", \"change\"], [3, \"for\"], [3, \"value\"]],\n  template: function SearchInvoiceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Tipo de B\\u00FAsqueda:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, SearchInvoiceComponent_div_4_Template, 4, 5, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"form\", 5)(7, \"div\", 6)(8, \"label\");\n      i0.ɵɵtext(9, \"Cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"select\", 7)(11, \"option\", 8);\n      i0.ɵɵtext(12, \"Seleccionar Cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, SearchInvoiceComponent_option_13_Template, 2, 2, \"option\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 6)(15, \"label\");\n      i0.ɵɵtext(16, \"Numero de Factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function SearchInvoiceComponent_Template_button_click_18_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵtext(19, \"Buscar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"table\", 12)(21, \"thead\")(22, \"tr\")(23, \"th\");\n      i0.ɵɵtext(24, \"Numero de factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\");\n      i0.ɵɵtext(26, \"Fecha Emision\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"th\");\n      i0.ɵɵtext(28, \"Total facturado\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(29, \"tbody\");\n      i0.ɵɵtemplate(30, SearchInvoiceComponent_tr_30_Template, 7, 3, \"tr\", 13);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.radioOptions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵattribute(\"disabled\", ctx.selectedOption != \"customer\" ? true : null);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n      i0.ɵɵadvance(4);\n      i0.ɵɵattribute(\"disabled\", ctx.selectedOption == \"customer\" ? true : null);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n  background-color: #f7f7f7;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n  padding: 20px;\\r\\n  text-align: center;\\r\\n  width: 100%;\\r\\n  margin: 0 auto;\\r\\n  padding-bottom: 60px;\\r\\n}\\r\\n.radio[_ngcontent-%COMP%] {\\r\\n  margin-left: 10px;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\nh1[_ngcontent-%COMP%] {\\r\\n  font-size: 24px;\\r\\n  margin: 0;\\r\\n  padding: 10px 0;\\r\\n  display: inline;\\r\\n}\\r\\n\\r\\n.title-info[_ngcontent-%COMP%] {\\r\\n  text-align: left;\\r\\n}\\r\\n\\r\\n.new-voucher-button[_ngcontent-%COMP%] {\\r\\n  left: 10px;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.new-button[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-right: 10px;\\r\\n  margin-bottom: 10px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-top: 10px;\\r\\n  display: inline;\\r\\n}\\r\\n\\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0056b3;\\r\\n  }\\r\\n\\r\\n.customer-info[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  margin: 10px;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%], input[type=\\\"number\\\"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 10px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\ntable.products[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  margin-top: 20px;\\r\\n  border-collapse: collapse;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border: 1px solid #ccc;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n    background-color: #007bff;\\r\\n    color: white;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    padding: 5px;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 5px;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    max-width: 100px;\\r\\n    max-height: 100px;\\r\\n  }\\r\\n\\r\\ntable.summary[_ngcontent-%COMP%] {\\r\\n  width: 30%;\\r\\n  float: right;\\r\\n  border-collapse: collapse;\\r\\n  margin-top: 20px;\\r\\n  text-align: right;\\r\\n}\\r\\n\\r\\n  table.summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border: 1px solid #ccc;\\r\\n  }\\r\\n\\r\\n.save-button[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-top: 20px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n  .save-button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0056b3;\\r\\n  }\\r\\n\\r\\n.search-section[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n  .search-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\r\\n    margin-right: 10px;\\r\\n  }\\r\\n\\r\\n  .search-section[_ngcontent-%COMP%]   input[type=\\\"radio\\\"][_ngcontent-%COMP%] {\\r\\n    margin-right: 5px;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2VhcmNoLWludm9pY2Uvc2VhcmNoLWludm9pY2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsdUNBQXVDO0VBQ3ZDLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLGNBQWM7RUFDZCxvQkFBb0I7QUFDdEI7QUFDQTtFQUNFLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2IsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFNBQVM7RUFDVCxlQUFlO0VBQ2YsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsV0FBVztBQUNiOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztFQUVFO0lBQ0UseUJBQXlCO0VBQzNCOztBQUVGO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCOztBQUVBOzs7RUFHRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtBQUNwQjs7RUFFRTs7SUFFRSxhQUFhO0lBQ2Isc0JBQXNCO0VBQ3hCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZDs7RUFFQTs7SUFFRSxXQUFXO0lBQ1gsWUFBWTtJQUNaLHNCQUFzQjtJQUN0QixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0VBQ25COztBQUVGO0VBQ0UsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtBQUNuQjs7RUFFRTtJQUNFLGFBQWE7SUFDYixzQkFBc0I7RUFDeEI7O0FBRUY7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjs7RUFFRTtJQUNFLHlCQUF5QjtFQUMzQjs7QUFFRjtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsbUJBQW1CO0FBQ3JCOztFQUVFO0lBQ0Usa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsaUJBQWlCO0VBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNztcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW46IDAgYXV0bztcclxuICBwYWRkaW5nLWJvdHRvbTogNjBweDtcclxufVxyXG4ucmFkaW8ge1xyXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuaDEge1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBtYXJnaW46IDA7XHJcbiAgcGFkZGluZzogMTBweCAwO1xyXG4gIGRpc3BsYXk6IGlubGluZTtcclxufVxyXG5cclxuLnRpdGxlLWluZm8ge1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuXHJcbi5uZXctdm91Y2hlci1idXR0b24ge1xyXG4gIGxlZnQ6IDEwcHg7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbi5uZXctYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIG1hcmdpbi1yaWdodDogMTBweDtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gIGZsb2F0OiBsZWZ0O1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBkaXNwbGF5OiBpbmxpbmU7XHJcbn1cclxuXHJcbiAgYnV0dG9uOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7XHJcbiAgfVxyXG5cclxuLmN1c3RvbWVyLWluZm8gLmZpZWxkIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgbWFyZ2luOiAxMHB4O1xyXG59XHJcblxyXG5sYWJlbCB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwidGV4dFwiXSxcclxuaW5wdXRbdHlwZT1cIm51bWJlclwiXSxcclxuc2VsZWN0IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxufVxyXG5cclxudGFibGUucHJvZHVjdHMge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbiAgdGFibGUucHJvZHVjdHMgdGgsXHJcbiAgdGFibGUucHJvZHVjdHMgdGQge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgfVxyXG5cclxuICB0YWJsZS5wcm9kdWN0cyB0aCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuXHJcbiAgdGFibGUucHJvZHVjdHMgdGQgc2VsZWN0LFxyXG4gIHRhYmxlLnByb2R1Y3RzIHRkIGlucHV0IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICB9XHJcblxyXG4gIHRhYmxlLnByb2R1Y3RzIHRkIGltZyB7XHJcbiAgICBtYXgtd2lkdGg6IDEwMHB4O1xyXG4gICAgbWF4LWhlaWdodDogMTAwcHg7XHJcbiAgfVxyXG5cclxudGFibGUuc3VtbWFyeSB7XHJcbiAgd2lkdGg6IDMwJTtcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xyXG59XHJcblxyXG4gIHRhYmxlLnN1bW1hcnkgdGQge1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgfVxyXG5cclxuLnNhdmUtYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgZmxvYXQ6IGxlZnQ7XHJcbn1cclxuXHJcbiAgLnNhdmUtYnV0dG9uOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7XHJcbiAgfVxyXG5cclxuLnNlYXJjaC1zZWN0aW9uIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxufVxyXG5cclxuICAuc2VhcmNoLXNlY3Rpb24gbGFiZWwge1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gIH1cclxuXHJcbiAgLnNlYXJjaC1zZWN0aW9uIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","integerValidator","Swal","i0","SearchInvoiceComponent","constructor","apiService","value","label","invoiceNumber","required","min","customerId","ngOnInit","getCustomer","onRadioChange","option","selectedOption","get","subscribe","data","customers","map","customer","id","businessName","razonSocial","search","formData","myForm","url","fire","products","product","numberInvoice","numeroFactura","dateInvoice","fechaEmisionFactura","totalInvoice","totalFactura","formatPrice","price","toLocaleString","style","minimumFractionDigits","maximumFractionDigits","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Carlos Morales\\Documents\\dev\\TEST\\TaxInvoicesWebApi\\TaxInvoicesWebApi\\ClientApp\\src\\app\\search-invoice\\search-invoice.component.ts","C:\\Users\\Carlos Morales\\Documents\\dev\\TEST\\TaxInvoicesWebApi\\TaxInvoicesWebApi\\ClientApp\\src\\app\\search-invoice\\search-invoice.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { InvoiceESInfo, ProductsModel } from './models-search-invoice';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { integerValidator } from '../utils';\r\nimport { ApiService } from '../api.service';\r\nimport { CustomerESModel, CustomerModel } from '../create-invoice/models-invoice';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-search-invoice-component',\r\n  templateUrl: './search-invoice.component.html',\r\n  styleUrls: ['./search-invoice.component.css']\r\n})\r\nexport class SearchInvoiceComponent implements OnInit{\r\n\r\n  constructor(private apiService: ApiService) {}\r\n\r\n  radioOptions = [\r\n    { value: 'customer', label: 'Cliente' },\r\n    { value: 'numberInvoice', label: 'Número de Factura' }\r\n  ];\r\n\r\n  selectedOption: string = 'customer';\r\n  customers: CustomerModel[] = [];\r\n  products: ProductsModel[] = [];\r\n\r\n  myForm = new FormGroup({\r\n    invoiceNumber: new FormControl(\"\", [Validators.required, Validators.min(1), integerValidator()]),\r\n    customerId: new FormControl(\"\", [Validators.required])\r\n  });\r\n\r\n  ngOnInit() {\r\n    this.getCustomer();\r\n  }\r\n\r\n  onRadioChange(option: string) {\r\n    this.selectedOption = option;\r\n  }\r\n\r\n  getCustomer() {\r\n    this.apiService.get('customer').subscribe((data: CustomerESModel[]) => {\r\n      this.customers = data.map((customer: CustomerESModel) => {\r\n        return {\r\n          id: customer.id,\r\n          businessName: customer.razonSocial,\r\n        };\r\n      });\r\n    });\r\n  }\r\n  \r\n  public search() {\r\n    const formData = this.myForm.value;\r\n    var url = 'bills';\r\n    if(this.selectedOption == 'customer'){\r\n      if(formData.customerId == \"\"){\r\n        Swal.fire('Selecciona un cliente', '', 'info');\r\n        return;\r\n      }\r\n      url += \"?idCliente=\"+formData.customerId;\r\n    } else {\r\n      if(formData.invoiceNumber == \"\"){\r\n        Swal.fire('Digita un número de factura', '', 'info');\r\n        return;\r\n      }\r\n      url += \"?idCliente=\"+formData.customerId;\r\n    }\r\n    this.apiService.get(url).subscribe((data: InvoiceESInfo[]) => {\r\n      this.products = data.map((product: InvoiceESInfo) => {\r\n        return {\r\n          numberInvoice: product.numeroFactura,\r\n          dateInvoice: product.fechaEmisionFactura,\r\n          totalInvoice: product.totalFactura\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  formatPrice(price: number): string {\r\n    return price.toLocaleString('es-CO', { style: 'decimal', minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"search-section\">\r\n    <label for=\"search-type\">Tipo de Búsqueda:</label>\r\n    <div class=\"radio\" *ngFor=\"let option of radioOptions\">\r\n      <input\r\n        type=\"radio\"\r\n        [id]=\"option.value\"\r\n        [value]=\"option.value\"\r\n        [checked]=\"option.value === selectedOption\"\r\n        (change)=\"onRadioChange(option.value)\"\r\n      />\r\n      <label [for]=\"option.value\">{{ option.label }}</label>\r\n    </div>    \r\n  </div>\r\n  <div class=\"customer-info\">\r\n    <form [formGroup]=\"myForm\">\r\n      <div class=\"field\">\r\n        <label>Cliente</label>\r\n        <select formControlName=\"customerId\" [attr.disabled]=\"selectedOption != 'customer' ? true: null\">\r\n          <option value=\"\">Seleccionar Cliente</option>\r\n          <option *ngFor=\"let customertOption of customers\" [value]=\"customertOption.id\">{{customertOption.businessName}}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"field\">\r\n        <label>Numero de Factura</label>\r\n        <input formControlName=\"invoiceNumber\" type=\"text\" [attr.disabled]=\"selectedOption == 'customer' ? true: null\">\r\n      </div>\r\n      <button (click)=\"search()\">Buscar</button>\r\n    </form>\r\n  </div>\r\n  <table class=\"products\">\r\n    <thead>\r\n      <tr>\r\n        <th>Numero de factura</th>\r\n        <th>Fecha Emision</th>\r\n        <th>Total facturado</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let product of products\">\r\n        <td>\r\n          {{product.numberInvoice}}\r\n        </td>\r\n        <td>\r\n          {{product.dateInvoice}}\r\n        </td>\r\n        <td>\r\n          {{formatPrice(product.totalInvoice)}}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}