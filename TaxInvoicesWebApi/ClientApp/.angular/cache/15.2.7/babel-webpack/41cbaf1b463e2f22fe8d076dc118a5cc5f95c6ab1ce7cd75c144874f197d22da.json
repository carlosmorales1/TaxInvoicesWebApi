{"ast":null,"code":"import Swal from 'sweetalert2';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { integerValidator } from '../utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CreateInvoiceComponent_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const customertOption_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", customertOption_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(customertOption_r5.businessName);\n  }\n}\nfunction CreateInvoiceComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Este campo es obligatorio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateInvoiceComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Este campo es obligatorio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateInvoiceComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Solo se permiten numeros enteros. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateInvoiceComponent_tr_35_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const productOption_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", productOption_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(productOption_r8.name);\n  }\n}\nfunction CreateInvoiceComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"select\", 17);\n    i0.ɵɵlistener(\"change\", function CreateInvoiceComponent_tr_35_Template_select_change_2_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const product_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onProductSelected($event, product_r6));\n    });\n    i0.ɵɵelementStart(3, \"option\", 6);\n    i0.ɵɵtext(4, \"Seleccionar Producto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, CreateInvoiceComponent_tr_35_option_5_Template, 2, 2, \"option\", 7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"input\", 18);\n    i0.ɵɵlistener(\"change\", function CreateInvoiceComponent_tr_35_Template_input_change_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const product_r6 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.changeQuantity($event, product_r6));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵelement(11, \"img\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r6 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.fixedProducts);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", product_r6.product ? ctx_r4.formatPrice(product_r6.product.unitPrice) : 0, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", product_r6.product ? product_r6.product.imageUrl : \"\", i0.ɵɵsanitizeUrl)(\"alt\", product_r6.product ? product_r6.product.name : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.formatPrice(product_r6.total), \" \");\n  }\n}\nexport class CreateInvoiceComponent {\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.fixedProducts = [];\n    this.customers = [];\n    //Datos\n    this.cartProducts = [];\n    this.myForm = new FormGroup({\n      invoiceNumber: new FormControl(\"\", [Validators.required, Validators.min(1), integerValidator()]),\n      customerId: new FormControl(\"\", [Validators.required])\n    });\n  }\n  ngOnInit() {\n    this.getCustomer();\n    this.getProductos();\n  }\n  getProductos() {\n    this.apiService.get('products').subscribe(data => {\n      this.fixedProducts = data.map(product => {\n        return {\n          id: product.id,\n          name: product.nombreProducto,\n          unitPrice: product.precioUnitario,\n          imageUrl: product.imagenProducto\n        };\n      });\n    });\n  }\n  getCustomer() {\n    this.apiService.get('customer').subscribe(data => {\n      this.customers = data.map(product => {\n        return {\n          id: product.id,\n          businessName: product.razonSocial\n        };\n      });\n    });\n  }\n  clearCart() {\n    if (this.cartProducts.length > 0) {\n      Swal.fire({\n        title: 'Limpiar Carrito',\n        text: '¿Estás seguro de que deseas eliminar todos los productos del carrito?',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Sí, Limpiar',\n        cancelButtonText: 'Cancelar'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.cartProducts = [];\n          Swal.fire('Carrito limpiado', '', 'success');\n        }\n      });\n    } else {\n      Swal.fire('Carrito Vacío', 'El carrito ya está vacío.', 'info');\n    }\n  }\n  addProductToCart() {\n    this.cartProducts.push({\n      quantity: 1,\n      total: 0\n    });\n  }\n  calculateSubtotal() {\n    let subtotal = 0;\n    for (const cartProduct of this.cartProducts) {\n      if (cartProduct.product != null) {\n        subtotal += cartProduct.product.unitPrice * cartProduct.quantity;\n      }\n    }\n    return subtotal;\n  }\n  calculateTaxes() {\n    return this.calculateSubtotal() * 0.19;\n  }\n  calculateTotal() {\n    return this.calculateSubtotal() + this.calculateTaxes();\n  }\n  onProductSelected(event, producto) {\n    producto.total = 0;\n    const selectedProductId = parseInt(event.target.value, 10);\n    const selectedProduct = this.fixedProducts.find(product => product.id === selectedProductId);\n    producto.product = selectedProduct;\n    producto.total = producto.quantity * selectedProduct.unitPrice;\n  }\n  changeQuantity(event, producto) {\n    const quantity = parseInt(event.target.value, 10);\n    producto.quantity = quantity;\n    if (producto.product != null) {\n      producto.total = quantity * producto.product.unitPrice;\n    }\n  }\n  formatPrice(price) {\n    return price.toLocaleString('es-CO', {\n      style: 'decimal',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  }\n  saveInvoice() {\n    // Implement logic to save the invoice\n    // You can send the invoice data to a server or perform any necessary actions here\n  }\n}\nCreateInvoiceComponent.ɵfac = function CreateInvoiceComponent_Factory(t) {\n  return new (t || CreateInvoiceComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\nCreateInvoiceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CreateInvoiceComponent,\n  selectors: [[\"app-create-invoice\"]],\n  decls: 54,\n  vars: 9,\n  consts: [[1, \"container\"], [1, \"new-voucher-button\", 3, \"click\"], [1, \"customer-info\"], [3, \"formGroup\"], [1, \"field\"], [\"formControlName\", \"customerId\"], [\"value\", \"0\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"error\", 4, \"ngIf\"], [\"formControlName\", \"invoiceNumber\", \"type\", \"text\"], [1, \"new-button\", 3, \"click\"], [1, \"products\"], [4, \"ngFor\", \"ngForOf\"], [1, \"summary\"], [1, \"save-button\", 3, \"click\"], [3, \"value\"], [1, \"error\"], [3, \"change\"], [\"type\", \"number\", \"step\", \"1\", \"value\", \"1\", \"min\", \"0\", 3, \"change\"], [3, \"src\", \"alt\"]],\n  template: function CreateInvoiceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function CreateInvoiceComponent_Template_button_click_1_listener() {\n        return ctx.clearCart();\n      });\n      i0.ɵɵtext(2, \"Nueva factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\", 3)(5, \"div\", 4)(6, \"label\");\n      i0.ɵɵtext(7, \"Cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"select\", 5)(9, \"option\", 6);\n      i0.ɵɵtext(10, \"Seleccionar Cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, CreateInvoiceComponent_option_11_Template, 2, 2, \"option\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, CreateInvoiceComponent_div_12_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\");\n      i0.ɵɵtext(15, \"Numero de Factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 9);\n      i0.ɵɵtemplate(17, CreateInvoiceComponent_div_17_Template, 2, 0, \"div\", 8);\n      i0.ɵɵtemplate(18, CreateInvoiceComponent_div_18_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function CreateInvoiceComponent_Template_button_click_19_listener() {\n        return ctx.addProductToCart();\n      });\n      i0.ɵɵtext(20, \"Agregar producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"table\", 11)(22, \"thead\")(23, \"tr\")(24, \"th\");\n      i0.ɵɵtext(25, \"Prodcuto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\");\n      i0.ɵɵtext(27, \"Precio Unitario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"th\");\n      i0.ɵɵtext(29, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"th\");\n      i0.ɵɵtext(31, \"Imagen\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"th\");\n      i0.ɵɵtext(33, \"Totales\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(34, \"tbody\");\n      i0.ɵɵtemplate(35, CreateInvoiceComponent_tr_35_Template, 14, 5, \"tr\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"table\", 13)(37, \"tr\")(38, \"td\");\n      i0.ɵɵtext(39, \"Sub total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"td\");\n      i0.ɵɵtext(41);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(42, \"tr\")(43, \"td\");\n      i0.ɵɵtext(44, \"Impuestos (19%)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"td\");\n      i0.ɵɵtext(46);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(47, \"tr\")(48, \"td\");\n      i0.ɵɵtext(49, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"td\");\n      i0.ɵɵtext(51);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(52, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function CreateInvoiceComponent_Template_button_click_52_listener() {\n        return ctx.saveInvoice();\n      });\n      i0.ɵɵtext(53, \"Guardar\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.myForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.myForm.get(\"invoiceNumber\")) == null ? null : tmp_2_0.hasError(\"required\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", (tmp_3_0 = ctx.myForm.get(\"invoiceNumber\")) == null ? null : tmp_3_0.hasError(\"required\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", (tmp_4_0 = ctx.myForm.get(\"invoiceNumber\")) == null ? null : tmp_4_0.hasError(\"notInteger\"));\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cartProducts);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.formatPrice(ctx.calculateSubtotal()));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.formatPrice(ctx.calculateTaxes()));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.formatPrice(ctx.calculateTotal()));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\".container[_ngcontent-%COMP%] {\\r\\n  background-color: #f7f7f7;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n  padding: 20px;\\r\\n  text-align: center;\\r\\n  width: 100%;\\r\\n  margin: 0 auto;\\r\\n  padding-bottom: 170px;\\r\\n}\\r\\n\\r\\nh1[_ngcontent-%COMP%] {\\r\\n  font-size: 24px;\\r\\n  margin: 0;\\r\\n  padding: 10px 0;\\r\\n  display: inline;\\r\\n}\\r\\n\\r\\n.title-info[_ngcontent-%COMP%] {\\r\\n  text-align: left;\\r\\n}\\r\\n\\r\\n.new-voucher-button[_ngcontent-%COMP%] {\\r\\n  left: 10px;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.new-button[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-right: 10px;\\r\\n  margin-bottom: 10px;\\r\\n  float: left;\\r\\n}\\r\\n.error[_ngcontent-%COMP%] {\\r\\n  font-size: 11px;\\r\\n  color: #ff6969;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-top: 10px;\\r\\n  display: inline;\\r\\n}\\r\\n\\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0056b3;\\r\\n  }\\r\\n\\r\\n.customer-info[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  margin: 10px;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%], input[type=\\\"number\\\"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 10px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\ntable.products[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  margin-top: 20px;\\r\\n  border-collapse: collapse;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border: 1px solid #ccc;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n    background-color: #007bff;\\r\\n    color: white;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    padding: 5px;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 5px;\\r\\n  }\\r\\n\\r\\n  table.products[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n    height: 100px;\\r\\n  }\\r\\n\\r\\ntable.summary[_ngcontent-%COMP%] {\\r\\n  width: 30%;\\r\\n  float: right;\\r\\n  border-collapse: collapse;\\r\\n  margin-top: 20px;\\r\\n  text-align: right;\\r\\n}\\r\\n\\r\\n  table.summary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    border: 1px solid #ccc;\\r\\n  }\\r\\n\\r\\n.save-button[_ngcontent-%COMP%] {\\r\\n  background-color: #007bff;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  padding: 10px 20px;\\r\\n  margin-top: 20px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n  .save-button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0056b3;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY3JlYXRlLWludm9pY2UvY3JlYXRlLWludm9pY2UuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsdUNBQXVDO0VBQ3ZDLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsV0FBVztFQUNYLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsU0FBUztFQUNULGVBQWU7RUFDZixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsVUFBVTtFQUNWLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7QUFDQTtFQUNFLGVBQWU7RUFDZixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztFQUVFO0lBQ0UseUJBQXlCO0VBQzNCOztBQUVGO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCOztBQUVBOzs7RUFHRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtBQUNwQjs7RUFFRTs7SUFFRSxhQUFhO0lBQ2Isc0JBQXNCO0VBQ3hCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZDs7RUFFQTs7SUFFRSxXQUFXO0lBQ1gsWUFBWTtJQUNaLHNCQUFzQjtJQUN0QixrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSxhQUFhO0VBQ2Y7O0FBRUY7RUFDRSxVQUFVO0VBQ1YsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixnQkFBZ0I7RUFDaEIsaUJBQWlCO0FBQ25COztFQUVFO0lBQ0UsYUFBYTtJQUNiLHNCQUFzQjtFQUN4Qjs7QUFFRjtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsV0FBVztBQUNiOztFQUVFO0lBQ0UseUJBQXlCO0VBQzNCIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNztcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW46IDAgYXV0bztcclxuICBwYWRkaW5nLWJvdHRvbTogMTcwcHg7XHJcbn1cclxuXHJcbmgxIHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDEwcHggMDtcclxuICBkaXNwbGF5OiBpbmxpbmU7XHJcbn1cclxuXHJcbi50aXRsZS1pbmZvIHtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG59XHJcblxyXG4ubmV3LXZvdWNoZXItYnV0dG9uIHtcclxuICBsZWZ0OiAxMHB4O1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcblxyXG4ubmV3LWJ1dHRvbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICBmbG9hdDogbGVmdDtcclxufVxyXG4uZXJyb3Ige1xyXG4gIGZvbnQtc2l6ZTogMTFweDtcclxuICBjb2xvcjogI2ZmNjk2OTtcclxufVxyXG5cclxuYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgZGlzcGxheTogaW5saW5lO1xyXG59XHJcblxyXG4gIGJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzO1xyXG4gIH1cclxuXHJcbi5jdXN0b21lci1pbmZvIC5maWVsZCB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIG1hcmdpbjogMTBweDtcclxufVxyXG5cclxubGFiZWwge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cInRleHRcIl0sXHJcbmlucHV0W3R5cGU9XCJudW1iZXJcIl0sXHJcbnNlbGVjdCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbn1cclxuXHJcbnRhYmxlLnByb2R1Y3RzIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4gIHRhYmxlLnByb2R1Y3RzIHRoLFxyXG4gIHRhYmxlLnByb2R1Y3RzIHRkIHtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gIH1cclxuXHJcbiAgdGFibGUucHJvZHVjdHMgdGgge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9XHJcblxyXG4gIHRhYmxlLnByb2R1Y3RzIHRkIHNlbGVjdCxcclxuICB0YWJsZS5wcm9kdWN0cyB0ZCBpbnB1dCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgfVxyXG5cclxuICB0YWJsZS5wcm9kdWN0cyB0ZCBpbWcge1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICB9XHJcblxyXG50YWJsZS5zdW1tYXJ5IHtcclxuICB3aWR0aDogMzAlO1xyXG4gIGZsb2F0OiByaWdodDtcclxuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbn1cclxuXHJcbiAgdGFibGUuc3VtbWFyeSB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICB9XHJcblxyXG4uc2F2ZS1idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgbWFyZ2luLXRvcDogMjBweDtcclxuICBmbG9hdDogbGVmdDtcclxufVxyXG5cclxuICAuc2F2ZS1idXR0b246aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMztcclxuICB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Swal","FormControl","FormGroup","Validators","integerValidator","i0","CreateInvoiceComponent","constructor","apiService","invoiceNumber","required","min","customerId","ngOnInit","getCustomer","getProductos","get","subscribe","data","fixedProducts","map","product","id","name","nombreProducto","unitPrice","precioUnitario","imageUrl","imagenProducto","customers","businessName","razonSocial","clearCart","cartProducts","length","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","addProductToCart","push","quantity","total","calculateSubtotal","subtotal","cartProduct","calculateTaxes","calculateTotal","onProductSelected","event","producto","selectedProductId","parseInt","target","value","selectedProduct","find","changeQuantity","formatPrice","price","toLocaleString","style","minimumFractionDigits","maximumFractionDigits","saveInvoice","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Carlos Morales\\Documents\\dev\\TEST\\TaxInvoicesWebApi\\TaxInvoicesWebApi\\ClientApp\\src\\app\\create-invoice\\create-invoice.component.ts","C:\\Users\\Carlos Morales\\Documents\\dev\\TEST\\TaxInvoicesWebApi\\TaxInvoicesWebApi\\ClientApp\\src\\app\\create-invoice\\create-invoice.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport Swal from 'sweetalert2';\r\nimport { ApiService } from '../api.service';\r\nimport { CartProductModel, FixedProductModel, ProductsESModel, CustomerESModel, CustomerModel } from './models-invoice';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { integerValidator } from '../utils';\r\n\r\n@Component({\r\n  selector: 'app-create-invoice',\r\n  templateUrl: './create-invoice.component.html',\r\n  styleUrls: ['./create-invoice.component.css']\r\n})\r\n\r\nexport class CreateInvoiceComponent implements OnInit{\r\n  constructor(private apiService: ApiService) {}\r\n\r\n  fixedProducts: FixedProductModel[] = [];\r\n  customers: CustomerModel[] = [];\r\n\r\n  //Datos\r\n  cartProducts: CartProductModel[] = []; \r\n\r\n  myForm = new FormGroup({\r\n    invoiceNumber: new FormControl(\"\", [Validators.required, Validators.min(1), integerValidator()]),\r\n    customerId: new FormControl(\"\", [Validators.required])\r\n  });\r\n\r\n  ngOnInit() {\r\n    this.getCustomer();\r\n    this.getProductos();\r\n  }\r\n\r\n  getProductos() {\r\n    this.apiService.get('products').subscribe((data: ProductsESModel[]) => {\r\n      this.fixedProducts = data.map((product: ProductsESModel) => {\r\n        return {\r\n          id: product.id,\r\n          name: product.nombreProducto,\r\n          unitPrice: product.precioUnitario,\r\n          imageUrl: product.imagenProducto\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  getCustomer() {\r\n    this.apiService.get('customer').subscribe((data: CustomerESModel[]) => {\r\n      this.customers = data.map((product: CustomerESModel) => {\r\n        return {\r\n          id: product.id,\r\n          businessName: product.razonSocial,\r\n        };\r\n      });\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  clearCart() {\r\n    if (this.cartProducts.length > 0) {\r\n      Swal.fire({\r\n        title: 'Limpiar Carrito',\r\n        text: '¿Estás seguro de que deseas eliminar todos los productos del carrito?',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Sí, Limpiar',\r\n        cancelButtonText: 'Cancelar'\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          this.cartProducts = [];\r\n          Swal.fire('Carrito limpiado', '', 'success');\r\n        }\r\n      });\r\n    } else {\r\n      Swal.fire('Carrito Vacío', 'El carrito ya está vacío.', 'info');\r\n    }\r\n  }\r\n\r\n  addProductToCart() {\r\n    this.cartProducts.push({ quantity: 1, total: 0 });\r\n  }\r\n\r\n  calculateSubtotal() {\r\n    let subtotal = 0;\r\n    for (const cartProduct of this.cartProducts) {\r\n      if (cartProduct.product != null) {\r\n        subtotal += cartProduct.product.unitPrice * cartProduct.quantity;\r\n      }\r\n    }\r\n    return subtotal;\r\n  }\r\n\r\n  calculateTaxes() {\r\n    return this.calculateSubtotal() * 0.19;\r\n  }\r\n\r\n  calculateTotal() {\r\n    return this.calculateSubtotal() + this.calculateTaxes();\r\n  }\r\n\r\n  onProductSelected(event: any, producto: CartProductModel) {\r\n    producto.total = 0;\r\n    const selectedProductId = parseInt(event.target.value, 10);\r\n    const selectedProduct = this.fixedProducts.find(product => product.id === selectedProductId);\r\n    producto.product = selectedProduct;\r\n    producto.total = producto.quantity * selectedProduct!.unitPrice;\r\n  }\r\n\r\n  changeQuantity(event: any, producto: CartProductModel) {\r\n    const quantity = parseInt(event.target.value, 10);\r\n    producto.quantity = quantity;\r\n    if (producto.product != null ) {\r\n      producto.total = quantity * producto.product.unitPrice;\r\n    }\r\n  }\r\n\r\n  formatPrice(price: number): string {\r\n    return price.toLocaleString('es-CO', { style: 'decimal', minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n  }\r\n\r\n  saveInvoice() {\r\n    // Implement logic to save the invoice\r\n    // You can send the invoice data to a server or perform any necessary actions here\r\n  }\r\n}\r\n\r\n","<div class=\"container\">\r\n  <button (click)=\"clearCart()\" class=\"new-voucher-button\">Nueva factura</button>\r\n\r\n  <div class=\"customer-info\">\r\n    <form [formGroup]=\"myForm\">\r\n      <div class=\"field\">\r\n        <label>Cliente</label>\r\n        <select formControlName=\"customerId\">\r\n          <option value=\"0\">Seleccionar Cliente</option>\r\n          <option *ngFor=\"let customertOption of customers\" [value]=\"customertOption.id\">{{customertOption.businessName}}</option>\r\n        </select>\r\n        <div class=\"error\" *ngIf=\"myForm.get('invoiceNumber')?.hasError('required')\">\r\n          Este campo es obligatorio.\r\n        </div>\r\n      </div>\r\n      <div class=\"field\">\r\n        <label>Numero de Factura</label>\r\n        <input formControlName=\"invoiceNumber\" type=\"text\">\r\n        <div class=\"error\" *ngIf=\"myForm.get('invoiceNumber')?.hasError('required')\">\r\n          Este campo es obligatorio.\r\n        </div>\r\n        <div class=\"error\" *ngIf=\"myForm.get('invoiceNumber')?.hasError('notInteger')\">\r\n          Solo se permiten numeros enteros.\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <button (click)=\"addProductToCart()\" class=\"new-button\">Agregar producto</button>\r\n  <table class=\"products\">\r\n    <thead>\r\n      <tr>\r\n        <th>Prodcuto</th>\r\n        <th>Precio Unitario</th>\r\n        <th>Cantidad</th>\r\n        <th>Imagen</th>\r\n        <th>Totales</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let product of cartProducts\">\r\n        <td>\r\n          <select (change)=\"onProductSelected($event, product)\">\r\n            <option value=\"0\">Seleccionar Producto</option>\r\n            <option *ngFor=\"let productOption of fixedProducts\" [value]=\"productOption.id\">{{productOption.name}}</option>\r\n          </select>\r\n        </td>\r\n        <td>\r\n          {{product.product ? formatPrice(product.product!.unitPrice): 0}}\r\n        </td>\r\n        <td>\r\n          <input (change)=\"changeQuantity($event, product)\" type=\"number\" step=\"1\" value=\"1\" min=\"0\" >\r\n        </td>\r\n        <td>\r\n          <img [src]=\"product.product ? product.product!.imageUrl : ''\" [alt]=\"product.product ? product.product!.name : ''\">\r\n        </td>\r\n        <td>\r\n          {{formatPrice(product.total)}}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <table class=\"summary\">\r\n    <tr>\r\n      <td>Sub total</td>\r\n      <td>{{formatPrice(calculateSubtotal())}}</td>\r\n    </tr>\r\n    <tr>\r\n      <td>Impuestos (19%)</td>\r\n      <td>{{formatPrice(calculateTaxes())}}</td>\r\n    </tr>\r\n    <tr>\r\n      <td>Total</td>\r\n      <td>{{formatPrice(calculateTotal())}}</td>\r\n    </tr>\r\n  </table>\r\n\r\n  <button (click)=\"saveInvoice()\" class=\"save-button\">Guardar</button>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}